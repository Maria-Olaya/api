<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${torneoForm.idTorneo != null} ? 'Editar Torneo' : 'Crear Torneo'">Formulario Torneo</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tipografía y colores globales -->
    <link rel="stylesheet" href="/css/globals.css">
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
</head>
<body>
    <!-- HEADER -->
    <div th:replace="fragments/header :: header"></div>

    <!-- FORMULARIO -->
    <main class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card p-4 shadow-sm rounded-3">
                    <h2 class="mb-4 text-center" th:text="${torneoForm.idTorneo != null} ? 'Editar Torneo' : 'Crear Torneo'"></h2>

                    <form th:action="@{${torneoForm.idTorneo != null} ? '/torneos/actualizar/' + ${torneoForm.idTorneo} : '/torneos/guardar'}"
                        th:object="${torneoForm}" method="post" class="needs-validation" novalidate>

                        <input type="hidden" th:field="*{idTorneo}"/>

                        <!-- Nombre -->
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre:</label>
                            <input type="text" id="nombre" th:field="*{nombre}" class="form-control"/>
                            <div class="text-danger small" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></div>
                        </div>

                        <!-- Tipo de Torneo -->
                        <div class="mb-3">
                            <label for="tipoTorneo" class="form-label">Tipo de Torneo:</label>
                            <select id="tipoTorneo" th:field="*{tipoTorneo}" class="form-select">
                                <option th:each="tipo : ${T(com.proyecto.cabapro.enums.TipoTorneo).values()}"
                                        th:value="${tipo}" th:text="${tipo}"></option>
                            </select>
                            <div class="text-danger small" th:if="${#fields.hasErrors('tipoTorneo')}" th:errors="*{tipoTorneo}"></div>
                        </div>

                        <!-- Categoría -->
                        <div class="mb-3">
                            <label for="categoria" class="form-label">Categoría:</label>
                            <select id="categoria" th:field="*{categoria}" class="form-select">
                                <option th:each="cat : ${T(com.proyecto.cabapro.enums.CategoriaTorneo).values()}"
                                        th:value="${cat}" th:text="${cat}"></option>
                            </select>
                            <div class="text-danger small" th:if="${#fields.hasErrors('categoria')}" th:errors="*{categoria}"></div>
                        </div>

                        <!-- Fecha Inicio -->
                        <div class="mb-3">
                            <label for="fechaInicio" class="form-label">Fecha de Inicio:</label>
                            <input type="datetime-local" id="fechaInicio" th:field="*{fechaInicio}" class="form-control"/>
                            <div class="text-danger small" th:if="${#fields.hasErrors('fechaInicio')}" th:errors="*{fechaInicio}"></div>
                        </div>

                        <!-- Fecha Fin -->
                        <div class="mb-3">
                            <label for="fechaFin" class="form-label">Fecha de Fin:</label>
                            <input type="datetime-local" id="fechaFin" th:field="*{fechaFin}" class="form-control"/>
                            <div class="text-danger small" th:if="${#fields.hasErrors('fechaFin')}" th:errors="*{fechaFin}"></div>
                            <div class="text-danger small" th:if="${#fields.hasErrors('fechasValidas')}" th:errors="*{fechasValidas}"></div>
                        </div>

                        <!-- Botón -->
                        <div class="d-grid mt-4">
                            <button type="submit" class="btn btn-cta btn-caba-verde btn-lg" th:text="${torneoForm.idTorneo != null} ? 'Actualizar' : 'Crear'"></button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </main>


    <!-- FOOTER -->
    <div th:replace="fragments/footer :: footer"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
